/*
 * Decompiled with CFR 0.145.
 * 
 * Could not load the following classes:
 *  net.minecraft.class_2547
 *  net.minecraft.class_2596
 *  net.minecraft.class_2670
 *  net.minecraft.class_310
 *  net.minecraft.class_4587
 *  net.minecraft.class_634
 *  net.minecraft.class_6373
 */
package dev.recollect.hana.mod.modules.impl.exploit.dev;

import dev.recollect.hana.api.alts.Alt;
import dev.recollect.hana.api.events.eventbus.EventHandler;
import dev.recollect.hana.api.events.impl.PacketEvent;
import dev.recollect.hana.api.events.impl.UpdateWalkingEvent;
import dev.recollect.hana.api.utils.Wrapper;
import dev.recollect.hana.api.utils.math.Timer;
import dev.recollect.hana.mod.modules.Module;
import dev.recollect.hana.mod.modules.settings.impl.SliderSetting;
import dev.recollect.hana.socket.network.info.record.GameInfo;
import java.util.Iterator;
import java.util.concurrent.CopyOnWriteArrayList;
import java.util.function.Predicate;
import net.minecraft.class_2547;
import net.minecraft.class_2596;
import net.minecraft.class_2670;
import net.minecraft.class_310;
import net.minecraft.class_4587;
import net.minecraft.class_634;
import net.minecraft.class_6373;

public class PingSpoof
extends Module {
    private final SliderSetting spoof;
    private final CopyOnWriteArrayList<CustomPacket> packet;

    @EventHandler
    public void onUpdateWalking(UpdateWalkingEvent updateWalkingEvent) {
        UpdateWalkingEvent a = updateWalkingEvent;
        PingSpoof a2 = this;
        a2.update();
    }

    @Override
    public void onRender3D(class_4587 class_45872, float f) {
        float a = f;
        PingSpoof a2 = this;
        a2.update();
    }

    @Override
    public void onLogout() {
        PingSpoof a;
        a.packet.clear();
    }

    @Override
    public void onThread() {
        PingSpoof a;
        a.update();
    }

    @Override
    public void onUpdate() {
        PingSpoof a;
        a.update();
    }

    public PingSpoof() {
        super(Alt.ALLATORIxDEMO(".n3\u0011h-~-"), Module.Category.Exploit);
        PingSpoof a;
        a.spoof = a.add(new SliderSetting(GameInfo.ALLATORIxDEMO("Ybete"), 500.0, 0.0, 5000.0, 1.0).setSuffix(Alt.ALLATORIxDEMO("|8")));
        a.packet = new CopyOnWriteArrayList();
        a.setChinese(GameInfo.ALLATORIxDEMO("\u504d\u5eed\u8fdc"));
    }

    private /* synthetic */ void update() {
        PingSpoof a;
        if (PingSpoof.nullCheck()) {
            a.packet.clear();
            return;
        }
        a.packet.removeIf(CustomPacket::send);
    }

    @Override
    public void onDisable() {
        Object a;
        PingSpoof pingSpoof = a;
        if (PingSpoof.nullCheck()) {
            pingSpoof.packet.clear();
            return;
        }
        Object object = a = pingSpoof.packet.iterator();
        while (object.hasNext()) {
            ((CustomPacket)a.next()).apply();
            object = a;
        }
    }

    @EventHandler
    public void onPacketReceive(PacketEvent.Receive receive) {
        PacketEvent.Receive a = receive;
        PingSpoof a2 = this;
        if (PingSpoof.nullCheck()) {
            return;
        }
        if (a.getPacket() instanceof class_6373 || a.getPacket() instanceof class_2670) {
            a2.packet.add(new CustomPacket(a2, (class_2596)a.getPacket()));
            a.cancel();
        }
    }

    private class CustomPacket {
        final int delay;
        final /* synthetic */ PingSpoof this$0;
        class_2596 pp;
        final Timer timer;

        public void apply() {
            CustomPacket a;
            if (a.pp != null) {
                a.pp.method_11054((class_2547)Wrapper.mc.method_1562());
            }
        }

        /*
         * WARNING - void declaration
         */
        public CustomPacket(PingSpoof object, class_2596 class_25962) {
            void a;
            Object a2 = object;
            Object object2 = object = this;
            ((CustomPacket)object).this$0 = a2;
            object();
            ((CustomPacket)object2).pp = a;
            Object object3 = object;
            ((CustomPacket)object2).timer = new Timer();
            ((CustomPacket)object2).delay = ((PingSpoof)a2).spoof.getValueInt();
        }

        public boolean send() {
            CustomPacket a2;
            CustomPacket customPacket;
            CustomPacket customPacket2 = customPacket = a2;
            if (customPacket2.timer.passedMs(customPacket2.delay)) {
                try {
                    customPacket.apply();
                }
                catch (Exception a2) {
                    a2.printStackTrace();
                }
                return true;
            }
            return false;
        }
    }

}
