/*
 * Decompiled with CFR 0.145.
 * 
 * Could not load the following classes:
 *  net.minecraft.class_1297
 *  net.minecraft.class_1684
 *  net.minecraft.class_243
 *  net.minecraft.class_2596
 *  net.minecraft.class_2828
 *  net.minecraft.class_2828$class_2829
 *  net.minecraft.class_310
 *  net.minecraft.class_634
 *  net.minecraft.class_638
 *  net.minecraft.class_742
 *  net.minecraft.class_746
 */
package dev.recollect.hana.mod.modules.impl.exploit.dev;

import dev.recollect.hana.api.events.eventbus.EventHandler;
import dev.recollect.hana.api.events.impl.EntitySpawnEvent;
import dev.recollect.hana.api.events.impl.PacketEvent;
import dev.recollect.hana.mod.modules.Module;
import dev.recollect.hana.mod.modules.impl.render.freelook.ProjectionUtils;
import dev.recollect.hana.mod.modules.settings.impl.BooleanSetting;
import dev.recollect.hana.xibao.xibaoutil.RenderHelper;
import java.util.Comparator;
import java.util.List;
import java.util.Optional;
import java.util.Queue;
import java.util.concurrent.ConcurrentLinkedQueue;
import java.util.function.Consumer;
import java.util.stream.Stream;
import net.minecraft.class_1297;
import net.minecraft.class_1684;
import net.minecraft.class_243;
import net.minecraft.class_2596;
import net.minecraft.class_2828;
import net.minecraft.class_310;
import net.minecraft.class_634;
import net.minecraft.class_638;
import net.minecraft.class_742;
import net.minecraft.class_746;

public class FakePearl
extends Module {
    private int thrownPearlId;
    private final BooleanSetting cancelPackets;
    private final Queue<class_2828> packets;

    /*
     * WARNING - void declaration
     */
    private /* synthetic */ void lambda$onReceivePacket$1(class_1684 class_16842, class_742 class_7422) {
        FakePearl a = class_7422;
        FakePearl a2 = this;
        if (a.equals((Object)FakePearl.mc.field_1724)) {
            void a3;
            if (!FakePearl.mc.field_1724.method_24828()) {
                return;
            }
            mc.method_1562().method_52787((class_2596)new class_2828.class_2829(FakePearl.mc.field_1724.method_23317(), FakePearl.mc.field_1724.method_23318() + 1.0, FakePearl.mc.field_1724.method_23321(), false));
            a2.thrownPearlId = a3.method_5628();
        }
    }

    @EventHandler
    public void onReceivePacket(EntitySpawnEvent entitySpawnEvent) {
        Object a = entitySpawnEvent;
        FakePearl a2 = this;
        if (FakePearl.nullCheck()) {
            return;
        }
        class_1297 class_12972 = ((EntitySpawnEvent)a).getEntity();
        if (class_12972 instanceof class_1684) {
            a = (class_1684)class_12972;
            FakePearl.mc.field_1687.method_18456().stream().min(Comparator.comparingDouble(arg_0 -> FakePearl.lambda$onReceivePacket$0((class_1684)a, arg_0))).ifPresent(arg_0 -> a2.lambda$onReceivePacket$1((class_1684)a, arg_0));
        }
    }

    public FakePearl() {
        FakePearl a;
        FakePearl fakePearl = a;
        super(ProjectionUtils.ALLATORIxDEMO("\u0014@\f@3S\u0011Z\u0002"), Module.Category.Exploit);
        FakePearl fakePearl2 = a;
        a.packets = new ConcurrentLinkedQueue<class_2828>();
        a.thrownPearlId = -1;
        fakePearl.cancelPackets = fakePearl.add(new BooleanSetting(RenderHelper.ALLATORIxDEMO("S^.\tp\u0001B\u000bv\u001cmI1"), true));
        fakePearl.setChinese(ProjectionUtils.ALLATORIxDEMO("\u5037\u73e5\u738e"));
    }

    private static /* synthetic */ double lambda$onReceivePacket$0(class_1684 class_16842, class_742 class_7422) {
        class_1684 a = class_7422;
        class_1684 a2 = class_16842;
        return a.method_19538().method_1022(new class_243(a2.method_23317(), a2.method_23318(), a2.method_23321()));
    }

    @EventHandler
    public void onPacketSend(PacketEvent.Send a) {
        FakePearl a2;
        FakePearl fakePearl = a2;
        if (fakePearl.thrownPearlId != -1 && (a2 = a.getPacket()) instanceof class_2828) {
            class_2828 class_28282 = (class_2828)a2;
            if (fakePearl.cancelPackets.getValue()) {
                fakePearl.packets.add(class_28282);
                a.cancel();
            }
        }
    }

    @Override
    public void onUpdate() {
        FakePearl a2;
        FakePearl fakePearl = a2;
        if (fakePearl.thrownPearlId != -1) {
            boolean bl = false;
            for (FakePearl a2 : FakePearl.mc.field_1687.method_18112()) {
                if (a2.method_5628() != fakePearl.thrownPearlId || !(a2 instanceof class_1684)) continue;
                (class_1684)a2;
                bl = true;
            }
            if (!bl) {
                fakePearl.thrownPearlId = -1;
                if (!fakePearl.packets.isEmpty()) {
                    do {
                        mc.method_1562().method_52787((class_2596)fakePearl.packets.poll());
                    } while (!fakePearl.packets.isEmpty());
                    return;
                }
            }
        } else if (!fakePearl.packets.isEmpty()) {
            do {
                mc.method_1562().method_52787((class_2596)fakePearl.packets.poll());
            } while (!fakePearl.packets.isEmpty());
        }
    }
}
