/*
 * Decompiled with CFR 0.145.
 * 
 * Could not load the following classes:
 *  net.minecraft.class_1268
 *  net.minecraft.class_1661
 *  net.minecraft.class_1792
 *  net.minecraft.class_1799
 *  net.minecraft.class_1802
 *  net.minecraft.class_2246
 *  net.minecraft.class_2248
 *  net.minecraft.class_2338
 *  net.minecraft.class_2350
 *  net.minecraft.class_2382
 *  net.minecraft.class_243
 *  net.minecraft.class_2596
 *  net.minecraft.class_2885
 *  net.minecraft.class_310
 *  net.minecraft.class_3965
 *  net.minecraft.class_638
 *  net.minecraft.class_746
 */
package dev.recollect.hana.mod.modules.impl.exploit.dev;

import dev.recollect.hana.Hana;
import dev.recollect.hana.api.managers.MineManager;
import dev.recollect.hana.api.utils.entity.EntityUtil;
import dev.recollect.hana.api.utils.entity.InventoryUtil;
import dev.recollect.hana.api.utils.math.Timer;
import dev.recollect.hana.api.utils.world.BlockUtil;
import dev.recollect.hana.mod.modules.Module;
import dev.recollect.hana.mod.modules.impl.client.CombatSetting;
import dev.recollect.hana.mod.modules.settings.SwingSide;
import dev.recollect.hana.mod.modules.settings.impl.BooleanSetting;
import dev.recollect.hana.mod.modules.settings.impl.EnumSetting;
import dev.recollect.hana.mod.modules.settings.impl.SliderSetting;
import dev.recollect.hana.socket.network.buffer.PacketBuffer;
import dev.recollect.hana.xibao.SnowAnimation;
import java.util.ArrayList;
import java.util.function.Predicate;
import net.minecraft.class_1268;
import net.minecraft.class_1661;
import net.minecraft.class_1792;
import net.minecraft.class_1799;
import net.minecraft.class_1802;
import net.minecraft.class_2246;
import net.minecraft.class_2248;
import net.minecraft.class_2338;
import net.minecraft.class_2350;
import net.minecraft.class_2382;
import net.minecraft.class_243;
import net.minecraft.class_2596;
import net.minecraft.class_2885;
import net.minecraft.class_310;
import net.minecraft.class_3965;
import net.minecraft.class_638;
import net.minecraft.class_746;

public class AntiBowBomb
extends Module {
    private final ArrayList<class_2338> pos;
    private final Timer timer;
    private final BooleanSetting web;
    private final BooleanSetting onlyUsing;
    private final BooleanSetting rotate;
    int progress;
    private final BooleanSetting detectMining;
    private final SliderSetting delay;
    private final BooleanSetting crystal;
    private final BooleanSetting onlyGround;
    private final BooleanSetting inventorySwap;
    boolean active;
    public final SliderSetting placeRange;
    public final SliderSetting blocksPer;

    private /* synthetic */ void placeCrystal(class_2338 a) {
        AntiBowBomb a22;
        AntiBowBomb antiBowBomb = a22;
        boolean a22 = AntiBowBomb.mc.field_1724.method_6079().method_7909() == class_1802.field_8301;
        class_2338 class_23382 = a.method_10074();
        BlockUtil.clickBlock(class_23382, BlockUtil.getClickSide(class_23382), false, a22 ? class_1268.field_5810 : class_1268.field_5808, CombatSetting.INSTANCE.swingMode.getValue());
    }

    private /* synthetic */ int findItem(class_1792 class_17922) {
        AntiBowBomb a = class_17922;
        AntiBowBomb a2 = this;
        if (a2.inventorySwap.getValue()) {
            return InventoryUtil.findItemInventorySlot((class_1792)a);
        }
        return InventoryUtil.findItem((class_1792)a);
    }

    /*
     * Exception decompiling
     */
    @Override
    public void onUpdate() {
        // This method has failed to decompile.  When submitting a bug report, please provide this stack trace, and (if you hold appropriate legal rights) the relevant class file.
        // org.benf.cfr.reader.util.ConfusedCFRException: Tried to end blocks [0[DOLOOP]], but top level block is 1[WHILELOOP]
        // org.benf.cfr.reader.bytecode.analysis.opgraph.Op04StructuredStatement.processEndingBlocks(Op04StructuredStatement.java:427)
        // org.benf.cfr.reader.bytecode.analysis.opgraph.Op04StructuredStatement.buildNestedBlocks(Op04StructuredStatement.java:479)
        // org.benf.cfr.reader.bytecode.analysis.opgraph.Op03SimpleStatement.createInitialStructuredBlock(Op03SimpleStatement.java:607)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisInner(CodeAnalyser.java:696)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysisOrWrapFail(CodeAnalyser.java:184)
        // org.benf.cfr.reader.bytecode.CodeAnalyser.getAnalysis(CodeAnalyser.java:129)
        // org.benf.cfr.reader.entities.attributes.AttributeCode.analyse(AttributeCode.java:96)
        // org.benf.cfr.reader.entities.Method.analyse(Method.java:397)
        // org.benf.cfr.reader.entities.ClassFile.analyseMid(ClassFile.java:906)
        // org.benf.cfr.reader.entities.ClassFile.analyseTop(ClassFile.java:797)
        // org.benf.cfr.reader.Driver.doClass(Driver.java:58)
        // org.benf.cfr.reader.CfrDriverImpl.analyse(CfrDriverImpl.java:67)
        // org.benf.cfr.reader.Main.main(Main.java:48)
        throw new IllegalStateException("Decompilation failed");
    }

    private /* synthetic */ boolean doPlace(class_2338 a) {
        AntiBowBomb a22;
        AntiBowBomb antiBowBomb = a22;
        if (!AntiBowBomb.mc.field_1724.method_6047().method_7909().equals((Object)class_1802.field_8301) && !AntiBowBomb.mc.field_1724.method_6079().method_7909().equals((Object)class_1802.field_8301) && antiBowBomb.findItem(class_1802.field_8301) == -1) {
            return false;
        }
        class_2338 class_23382 = a.method_10074();
        a22 = BlockUtil.getClickSide(class_23382);
        a22 = class_23382.method_46558().method_1031((double)a22.method_10163().method_10263() * 0.5, (double)a22.method_10163().method_10264() * 0.5, (double)a22.method_10163().method_10260() * 0.5);
        if (AntiBowBomb.mc.field_1724.method_6047().method_7909().equals((Object)class_1802.field_8301) || AntiBowBomb.mc.field_1724.method_6079().method_7909().equals((Object)class_1802.field_8301)) {
            if (antiBowBomb.rotate.getValue()) {
                EntityUtil.faceVector((class_243)a22);
            }
            antiBowBomb.placeCrystal(a);
            return true;
        }
        if (antiBowBomb.rotate.getValue()) {
            EntityUtil.faceVector((class_243)a22);
        }
        int a22 = AntiBowBomb.mc.field_1724.method_31548().field_7545;
        int n = antiBowBomb.findItem(class_1802.field_8301);
        if (n == -1) {
            return false;
        }
        AntiBowBomb antiBowBomb2 = antiBowBomb;
        antiBowBomb2.doSwap(n);
        antiBowBomb2.placeCrystal(a);
        AntiBowBomb antiBowBomb3 = antiBowBomb;
        if (!antiBowBomb.inventorySwap.getValue()) {
            antiBowBomb3.doSwap(a22);
        } else {
            antiBowBomb3.doSwap(n);
            EntityUtil.syncInventory();
        }
        return true;
    }

    /*
     * WARNING - void declaration
     */
    public boolean clickBlock(class_2338 class_23382, class_2350 class_23502, boolean bl, int n) {
        void a;
        void a2;
        void a3;
        AntiBowBomb a4 = class_23502;
        AntiBowBomb a5 = this;
        class_243 class_2432 = new class_243((double)a2.method_10263() + 0.5 + (double)a4.method_10163().method_10263() * 0.5, (double)a2.method_10264() + 0.5 + (double)a4.method_10163().method_10264() * 0.5, (double)a2.method_10260() + 0.5 + (double)a4.method_10163().method_10260() * 0.5);
        if (a3 != false) {
            EntityUtil.faceVector(class_2432);
        }
        a5.doSwap((int)a);
        EntityUtil.swingHand(class_1268.field_5808, CombatSetting.INSTANCE.swingMode.getValue());
        Module.sendSequencedPacket(arg_0 -> AntiBowBomb.lambda$clickBlock$1(new class_3965(class_2432, (class_2350)a4, (class_2338)a2, false), arg_0));
        return true;
    }

    public AntiBowBomb() {
        AntiBowBomb a;
        AntiBowBomb antiBowBomb = a;
        super(PacketBuffer.ALLATORIxDEMO("R\u00020|\u001bd4~\u0014|"), Module.Category.Exploit);
        AntiBowBomb antiBowBomb2 = a;
        antiBowBomb2.delay = antiBowBomb.add(new SliderSetting(SnowAnimation.ALLATORIxDEMO(")T\u0003_\u0019"), 100, 0, 1000));
        antiBowBomb.detectMining = antiBowBomb.add(new BooleanSetting(PacketBuffer.ALLATORIxDEMO("0v\u0018n:J9z\u0018x\u0017y"), true));
        antiBowBomb.blocksPer = antiBowBomb.add(new SliderSetting(SnowAnimation.ALLATORIxDEMO("7r/P\u0006B?[\u0012"), 2, 1, 10));
        antiBowBomb.rotate = antiBowBomb.add(new BooleanSetting(PacketBuffer.ALLATORIxDEMO("&|\u0002p\r{"), true));
        antiBowBomb.inventorySwap = antiBowBomb.add(new BooleanSetting(SnowAnimation.ALLATORIxDEMO("\t]\u001bN\u001bj/A\u0014b\u0018_\u0010"), true));
        antiBowBomb.placeRange = antiBowBomb.add(new SliderSetting(PacketBuffer.ALLATORIxDEMO("<g8]\u0011A\u0017\u001e{"), 5.0, 0.0, 6.0, 0.1));
        antiBowBomb.web = antiBowBomb.add(new BooleanSetting(SnowAnimation.ALLATORIxDEMO("8[\u0002"), true));
        antiBowBomb.crystal = antiBowBomb.add(new BooleanSetting(PacketBuffer.ALLATORIxDEMO("}\u0006j\u0005e\u0018r"), true));
        antiBowBomb.onlyUsing = antiBowBomb.add(new BooleanSetting(SnowAnimation.ALLATORIxDEMO(":p,J8B\u0006P\u0007"), false, object -> {
            Object a = object;
            AntiBowBomb a2 = this;
            return a2.crystal.getValue();
        }));
        AntiBowBomb antiBowBomb3 = a;
        antiBowBomb3.onlyGround = a.add(new BooleanSetting(PacketBuffer.ALLATORIxDEMO("#e5G3a\u0019d\u0017z"), true));
        antiBowBomb3.active = false;
        antiBowBomb3.timer = new Timer();
        a.progress = false ? 1 : 0;
        a.pos = new ArrayList();
        a.setChinese(SnowAnimation.ALLATORIxDEMO("\u53a0\u0002]U\u5f73"));
    }

    /*
     * WARNING - void declaration
     */
    public boolean placeBlock(class_2338 class_23382, boolean bl, int n) {
        void a;
        void a2;
        void a3;
        AntiBowBomb antiBowBomb = this;
        AntiBowBomb a4 = BlockUtil.getPlaceSide((class_2338)a2);
        if (a4 == null) {
            if (BlockUtil.airPlace()) {
                return antiBowBomb.clickBlock((class_2338)a2, class_2350.field_11033, (boolean)a, (int)a3);
            }
            return false;
        }
        return antiBowBomb.clickBlock(a2.method_10093((class_2350)a4), a4.method_10153(), (boolean)a, (int)a3);
    }

    private /* synthetic */ int getBlock(class_2248 class_22482) {
        AntiBowBomb a = class_22482;
        AntiBowBomb a2 = this;
        if (a2.inventorySwap.getValue()) {
            return InventoryUtil.findBlockInventorySlot((class_2248)a);
        }
        return InventoryUtil.findBlock((class_2248)a);
    }

    private static /* synthetic */ class_2596 lambda$clickBlock$1(class_3965 class_39652, int n) {
        int a = n;
        class_3965 a2 = class_39652;
        return new class_2885(class_1268.field_5808, a2, a);
    }

    private /* synthetic */ void doSwap(int n) {
        int a = n;
        AntiBowBomb a2 = this;
        if (a2.inventorySwap.getValue()) {
            InventoryUtil.inventorySwap(a, AntiBowBomb.mc.field_1724.method_31548().field_7545);
            return;
        }
        InventoryUtil.switchToSlot(a);
    }

    private /* synthetic */ boolean placeWeb(class_2338 class_23382) {
        AntiBowBomb a = class_23382;
        AntiBowBomb a2 = this;
        if (a2.pos.contains(a)) {
            return false;
        }
        AntiBowBomb antiBowBomb = a2;
        antiBowBomb.pos.add((class_2338)a);
        if (antiBowBomb.progress >= a2.blocksPer.getValueInt()) {
            return false;
        }
        if (a2.getBlock(class_2246.field_10343) == -1) {
            return false;
        }
        if (a2.detectMining.getValue() && Hana.BREAK.isMining((class_2338)a)) {
            return false;
        }
        if (BlockUtil.getPlaceSide((class_2338)a, a2.placeRange.getValue()) != null && AntiBowBomb.mc.field_1687.method_22347((class_2338)a) && a.method_10264() < 320) {
            AntiBowBomb antiBowBomb2;
            int n = AntiBowBomb.mc.field_1724.method_31548().field_7545;
            int n2 = a2.getBlock(class_2246.field_10343);
            AntiBowBomb antiBowBomb3 = a2;
            if (!antiBowBomb3.placeBlock((class_2338)a, antiBowBomb3.rotate.getValue(), n2)) {
                return false;
            }
            BlockUtil.placedPos.add((class_2338)a);
            ++a2.progress;
            AntiBowBomb antiBowBomb4 = a2;
            if (a2.inventorySwap.getValue()) {
                antiBowBomb4.doSwap(n2);
                EntityUtil.syncInventory();
                antiBowBomb2 = a2;
            } else {
                antiBowBomb4.doSwap(n);
                antiBowBomb2 = a2;
            }
            antiBowBomb2.timer.reset();
            return true;
        }
        return false;
    }
}
