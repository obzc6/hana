/*
 * Decompiled with CFR 0.145.
 * 
 * Could not load the following classes:
 *  net.minecraft.class_1297
 *  net.minecraft.class_1657
 *  net.minecraft.class_1937
 *  net.minecraft.class_238
 *  net.minecraft.class_243
 *  net.minecraft.class_2547
 *  net.minecraft.class_2596
 *  net.minecraft.class_2670
 *  net.minecraft.class_2684
 *  net.minecraft.class_310
 *  net.minecraft.class_4048
 *  net.minecraft.class_4587
 *  net.minecraft.class_634
 *  net.minecraft.class_6373
 *  net.minecraft.class_638
 *  net.minecraft.class_746
 */
package dev.recollect.hana.mod.modules.impl.exploit;

import dev.recollect.hana.api.events.eventbus.EventHandler;
import dev.recollect.hana.api.events.impl.PacketEvent;
import dev.recollect.hana.api.events.impl.UpdateWalkingEvent;
import dev.recollect.hana.api.utils.Wrapper;
import dev.recollect.hana.api.utils.math.Timer;
import dev.recollect.hana.api.utils.render.Render3DUtil;
import dev.recollect.hana.asm.accessors.IEntity;
import dev.recollect.hana.mod.modules.Module;
import dev.recollect.hana.mod.modules.settings.impl.BooleanSetting;
import dev.recollect.hana.mod.modules.settings.impl.SliderSetting;
import dev.recollect.hana.socket.network.buffer.PacketBuffer;
import dev.recollect.hana.video.FileUtil;
import java.awt.Color;
import java.util.Collection;
import java.util.HashMap;
import java.util.Iterator;
import java.util.concurrent.CopyOnWriteArrayList;
import java.util.function.Predicate;
import net.minecraft.class_1297;
import net.minecraft.class_1657;
import net.minecraft.class_1937;
import net.minecraft.class_238;
import net.minecraft.class_243;
import net.minecraft.class_2547;
import net.minecraft.class_2596;
import net.minecraft.class_2670;
import net.minecraft.class_2684;
import net.minecraft.class_310;
import net.minecraft.class_4048;
import net.minecraft.class_4587;
import net.minecraft.class_634;
import net.minecraft.class_6373;
import net.minecraft.class_638;
import net.minecraft.class_746;

public class FakeLag
extends Module {
    private static final HashMap<class_1657, class_243> map = new HashMap();
    private final BooleanSetting ping;
    private final SliderSetting spoof;
    private final CopyOnWriteArrayList<CustomPacket> packet;
    private final BooleanSetting entity;

    private /* synthetic */ void update() {
        FakeLag a;
        if (FakeLag.nullCheck()) {
            a.packet.clear();
            return;
        }
        a.packet.removeIf(CustomPacket::send);
    }

    /*
     * WARNING - void declaration
     */
    @Override
    public void onRender3D(class_4587 class_45872, float f) {
        FakeLag a;
        float a2 = f;
        FakeLag fakeLag = a = this;
        fakeLag.update();
        if (fakeLag.entity.getValue()) {
            Iterator<class_243> iterator = a2 = map.values().iterator();
            while (iterator.hasNext()) {
                void a3;
                class_243 class_2432 = a2.next();
                Color color = new Color(255, 255, 255, 100);
                Render3DUtil.draw3DBox((class_4587)a3, ((IEntity)FakeLag.mc.field_1724).getDimensions().method_30757(class_2432).method_1009(0.0, 0.1, 0.0), color, false, true);
                iterator = a2;
            }
        }
    }

    @Override
    public void onUpdate() {
        FakeLag a;
        a.update();
    }

    @EventHandler
    public void onUpdateWalking(UpdateWalkingEvent updateWalkingEvent) {
        UpdateWalkingEvent a = updateWalkingEvent;
        FakeLag a2 = this;
        a2.update();
    }

    @Override
    public void onDisable() {
        Object a;
        FakeLag fakeLag = a;
        if (FakeLag.nullCheck()) {
            fakeLag.packet.clear();
            return;
        }
        Object object = a = fakeLag.packet.iterator();
        while (object.hasNext()) {
            ((CustomPacket)a.next()).apply();
            object = a;
        }
    }

    public FakeLag() {
        FakeLag a;
        FakeLag fakeLag = a;
        super(FileUtil.ALLATORIxDEMO("9X=q7s\u001a"), Module.Category.Exploit);
        FakeLag fakeLag2 = a;
        fakeLag2.spoof = fakeLag.add(new SliderSetting(PacketBuffer.ALLATORIxDEMO("c\nr\u0013}"), 500.0, 0.0, 5000.0, 1.0));
        fakeLag.ping = fakeLag.add(new BooleanSetting(FileUtil.ALLATORIxDEMO("D\u0012|\u001a"), true));
        a.entity = fakeLag.add(new BooleanSetting(PacketBuffer.ALLATORIxDEMO("\u0012^\u000et\bb"), true));
        a.packet = new CopyOnWriteArrayList();
        a.setChinese(FileUtil.ALLATORIxDEMO("\u503c\u5373\u9802"));
    }

    @EventHandler
    public void onPacketReceive(PacketEvent.Receive a) {
        FakeLag a2;
        class_2684 class_26842;
        class_1297 class_12972;
        FakeLag fakeLag = a2;
        if (FakeLag.nullCheck()) {
            return;
        }
        if (fakeLag.ping.getValue() && (a.getPacket() instanceof class_6373 || a.getPacket() instanceof class_2670)) {
            fakeLag.packet.add(new CustomPacket(fakeLag, (class_2596)a.getPacket()));
            a.cancel();
            return;
        }
        a2 = a.getPacket();
        if (a2 instanceof class_2684 && (class_12972 = (class_26842 = (class_2684)a2).method_11645((class_1937)FakeLag.mc.field_1687)) instanceof class_1657) {
            a2 = (class_1657)class_12972;
            if (a2 == FakeLag.mc.field_1724) {
                return;
            }
            if (map.containsKey(a2) && fakeLag.entity.getValue()) {
                class_243 class_2432 = new class_243((double)class_26842.method_36150(), (double)class_26842.method_36151(), (double)class_26842.method_36152());
                if (map.get(a2).method_1022(FakeLag.mc.field_1724.method_19538()) < class_2432.method_1022(FakeLag.mc.field_1724.method_19538())) {
                    fakeLag.packet.add(new CustomPacket(fakeLag, (class_2596)class_26842));
                    a.cancel();
                }
            }
            FakeLag fakeLag2 = a2;
            map.put((class_1657)fakeLag2, fakeLag2.method_19538());
        }
    }

    private class CustomPacket {
        final /* synthetic */ FakeLag this$0;
        final Timer timer;
        class_2596 pp;
        final int delay;

        public boolean send() {
            CustomPacket a;
            CustomPacket customPacket = a;
            if (customPacket.timer.passedMs(customPacket.delay)) {
                a.apply();
                return true;
            }
            return false;
        }

        public void apply() {
            CustomPacket a;
            if (a.pp != null) {
                a.pp.method_11054((class_2547)Wrapper.mc.field_1724.field_3944);
            }
        }

        /*
         * WARNING - void declaration
         */
        public CustomPacket(FakeLag object, class_2596 class_25962) {
            void a;
            Object a2 = object;
            Object object2 = object = this;
            ((CustomPacket)object).this$0 = a2;
            object();
            ((CustomPacket)object2).pp = a;
            Object object3 = object;
            ((CustomPacket)object2).timer = new Timer();
            ((CustomPacket)object2).delay = ((FakeLag)a2).spoof.getValueInt();
        }
    }

}
