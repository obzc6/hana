/*
 * Decompiled with CFR 0.145.
 * 
 * Could not load the following classes:
 *  net.minecraft.class_2246
 *  net.minecraft.class_2248
 *  net.minecraft.class_2338
 *  net.minecraft.class_238
 *  net.minecraft.class_243
 *  net.minecraft.class_2596
 *  net.minecraft.class_2680
 *  net.minecraft.class_2828
 *  net.minecraft.class_2828$class_2829
 *  net.minecraft.class_310
 *  net.minecraft.class_4587
 *  net.minecraft.class_634
 *  net.minecraft.class_638
 *  net.minecraft.class_746
 */
package dev.recollect.hana.mod.modules.impl.exploit.dev;

import dev.recollect.hana.api.utils.dev.hole.OLEPOSSUtils;
import dev.recollect.hana.api.utils.math.FadeUtils;
import dev.recollect.hana.api.utils.math.Timer;
import dev.recollect.hana.api.utils.render.Render3DUtil;
import dev.recollect.hana.mod.modules.Module;
import dev.recollect.hana.mod.modules.settings.impl.BooleanSetting;
import dev.recollect.hana.mod.modules.settings.impl.SliderSetting;
import java.awt.Color;
import java.util.Random;
import java.util.function.Predicate;
import net.minecraft.class_2246;
import net.minecraft.class_2248;
import net.minecraft.class_2338;
import net.minecraft.class_238;
import net.minecraft.class_243;
import net.minecraft.class_2596;
import net.minecraft.class_2680;
import net.minecraft.class_2828;
import net.minecraft.class_310;
import net.minecraft.class_4587;
import net.minecraft.class_634;
import net.minecraft.class_638;
import net.minecraft.class_746;

public class TeleportWeb
extends Module {
    public final SliderSetting cooldown;
    private boolean teleporting;
    public final BooleanSetting onlyInWeb;
    public final SliderSetting range;
    public static TeleportWeb INSTANCE;
    private final Random random;
    private final Timer timer;

    @Override
    public void onUpdate() {
        TeleportWeb a;
        if (class_310.method_1551().field_1724 == null) {
            return;
        }
        TeleportWeb teleportWeb = a;
        if (teleportWeb.timer.passed(teleportWeb.cooldown.getValue() * 1000.0)) {
            if (a.onlyInWeb.getValue() && !a.isStandingOnWeb()) {
                return;
            }
            TeleportWeb teleportWeb2 = a;
            teleportWeb2.teleporting = true;
            teleportWeb2.sendTeleportPacket(teleportWeb2.generateRandomPosition(teleportWeb2.range.getValue()));
            teleportWeb2.timer.reset();
            a.teleporting = false;
        }
    }

    @Override
    public void onRender3D(class_4587 class_45872, float f) {
        TeleportWeb a = class_45872;
        TeleportWeb a2 = this;
        if (a2.teleporting && class_310.method_1551().field_1724 != null) {
            Render3DUtil.draw3DBox((class_4587)a, class_310.method_1551().field_1724.method_5829(), new Color(255, 0, 0, 150), true, true);
        }
    }

    private /* synthetic */ void sendTeleportPacket(class_243 class_2432) {
        TeleportWeb a = class_2432;
        TeleportWeb a2 = this;
        if (class_310.method_1551().field_1724 != null) {
            class_310.method_1551().field_1724.field_3944.method_52787((class_2596)new class_2828.class_2829(((class_243)a).field_1352, ((class_243)a).field_1351, ((class_243)a).field_1350, false));
        }
        if (class_310.method_1551().field_1724 != null) {
            class_310.method_1551().field_1724.method_5814(((class_243)a).field_1352, ((class_243)a).field_1351, ((class_243)a).field_1350);
        }
    }

    private /* synthetic */ class_243 generateRandomPosition(double a) {
        TeleportWeb a2;
        double d = class_310.method_1551().field_1724.method_23317() + (a2.random.nextDouble() - 0.5) * a;
        double d2 = class_310.method_1551().field_1724.method_23318() + (a2.random.nextDouble() - 0.5) * a;
        a = class_310.method_1551().field_1724.method_23321() + (a2.random.nextDouble() - 0.5) * a;
        return new class_243(d, d2, a);
    }

    public TeleportWeb() {
        TeleportWeb a2;
        TeleportWeb teleportWeb = a2;
        super(OLEPOSSUtils.ALLATORIxDEMO("r;Rt+0F7]:X<`g\u001f"), FadeUtils.ALLATORIxDEMO("c\u0012LO\u0015<l\u0019\u0011\u001d]\fT\u0005K\u0018O\u0004\u0006\u0001L3z\u0005CG_WH\u001fM\u0002^\tOQW^\b"), Module.Category.Exploit);
        TeleportWeb teleportWeb2 = a2;
        teleportWeb2.range = teleportWeb.add(new SliderSetting(OLEPOSSUtils.ALLATORIxDEMO("x)Ye\u0018"), 10.0, 0.10000000149011612, 50.0, a -> true));
        a2.cooldown = a2.add(new SliderSetting(FadeUtils.ALLATORIxDEMO("(U\u0003Q\u0015OL\u0004"), 1.0, 0.10000000149011612, 5.0, a -> true));
        a2.onlyInWeb = a2.add(new BooleanSetting(OLEPOSSUtils.ALLATORIxDEMO("e<A,c&`g\u001f"), true, a -> true));
        TeleportWeb teleportWeb3 = a2;
        TeleportWeb teleportWeb4 = a2;
        teleportWeb4.timer = new Timer();
        teleportWeb4.teleporting = false;
        teleportWeb3.random = new Random();
        teleportWeb3.setChinese(FadeUtils.ALLATORIxDEMO("\u8722\u86b7\u7f6c\u4f51\u9021\u6d70\u8bbf"));
        INSTANCE = teleportWeb3;
    }

    private /* synthetic */ boolean isStandingOnWeb() {
        TeleportWeb a;
        int n;
        TeleportWeb teleportWeb = a;
        a = class_310.method_1551().field_1724.method_5829();
        int n2 = n = (int)((class_238)a).field_1323;
        while ((double)n2 < ((class_238)a).field_1320) {
            int n3 = (int)((class_238)a).field_1321;
            while ((double)n3 < ((class_238)a).field_1324) {
                int n4;
                if (class_310.method_1551().field_1687.method_8320(new class_2338(n, (int)((class_238)a).field_1322 - 1, n4)).method_26204() == class_2246.field_10343) {
                    return true;
                }
                n3 = ++n4;
            }
            n2 = ++n;
        }
        return false;
    }
}
