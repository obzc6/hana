/*
 * Decompiled with CFR 0.145.
 * 
 * Could not load the following classes:
 *  net.minecraft.class_2246
 *  net.minecraft.class_2248
 *  net.minecraft.class_2338
 *  net.minecraft.class_2350
 *  net.minecraft.class_238
 *  net.minecraft.class_2596
 *  net.minecraft.class_2680
 *  net.minecraft.class_2828
 *  net.minecraft.class_2828$class_2829
 *  net.minecraft.class_2828$class_2830
 *  net.minecraft.class_310
 *  net.minecraft.class_3532
 *  net.minecraft.class_634
 *  net.minecraft.class_638
 *  net.minecraft.class_746
 */
package dev.recollect.hana.mod.modules.impl.exploit.dev;

import dev.recollect.hana.api.events.eventbus.EventHandler;
import dev.recollect.hana.api.events.impl.PacketEvent;
import dev.recollect.hana.api.utils.dev.BlockUpUtil;
import dev.recollect.hana.api.utils.entity.EntityUtil;
import dev.recollect.hana.api.utils.entity.MovementUtil;
import dev.recollect.hana.api.utils.math.Timer;
import dev.recollect.hana.mod.modules.Module;
import dev.recollect.hana.mod.modules.settings.impl.BooleanSetting;
import dev.recollect.hana.mod.modules.settings.impl.SliderSetting;
import java.util.function.Predicate;
import net.minecraft.class_2246;
import net.minecraft.class_2248;
import net.minecraft.class_2338;
import net.minecraft.class_2350;
import net.minecraft.class_238;
import net.minecraft.class_2596;
import net.minecraft.class_2680;
import net.minecraft.class_2828;
import net.minecraft.class_310;
import net.minecraft.class_3532;
import net.minecraft.class_634;
import net.minecraft.class_638;
import net.minecraft.class_746;
import org.bytedeco.javacv.FrameFilter;

public class WallClip
extends Module {
    private final Timer timer;
    private int packets;
    private final SliderSetting delay;
    private final BooleanSetting bypass;
    private final BooleanSetting clipIn;
    private final BooleanSetting invalid;
    public static WallClip INSTANCE;
    private boolean cancel;
    private final BooleanSetting clipMode;
    private final SliderSetting rotationDelay;
    private final BooleanSetting obsidian;

    public boolean insideBlock() {
        int n;
        WallClip a;
        WallClip wallClip = a;
        class_2338 class_23382 = EntityUtil.getPlayerPos(true);
        int n2 = n = -1;
        while (n2 <= 1) {
            int n3;
            int n4 = n3 = -1;
            while (n4 <= 1) {
                int n5;
                int n6 = n5 = -1;
                while (n6 <= 1) {
                    a = class_23382.method_10069(n, n3, n5);
                    if ((WallClip.mc.field_1687.method_8320((class_2338)a).method_26204() == class_2246.field_9987 || WallClip.mc.field_1687.method_8320((class_2338)a).method_26204() == class_2246.field_10540 && wallClip.obsidian.getValue()) && WallClip.mc.field_1724.method_5829().method_994(new class_238((class_2338)a))) {
                        return true;
                    }
                    n6 = ++n5;
                }
                n4 = ++n3;
            }
            n2 = ++n;
        }
        return false;
    }

    @Override
    public void onUpdate() {
        WallClip a;
        if (a.bypass.getValue()) {
            if (!a.insideBlock() && a.clipMode.getValue()) {
                a.disable();
                return;
            }
        } else {
            if (MovementUtil.isMoving()) {
                a.packets = 0;
                return;
            }
            if ((double)WallClip.mc.field_1724.field_6012 % a.delay.getValue() == 0.0) {
                WallClip.mc.field_1724.method_5814(WallClip.mc.field_1724.method_23317() + class_3532.method_15350((double)(a.roundToClosest(WallClip.mc.field_1724.method_23317(), Math.floor(WallClip.mc.field_1724.method_23317()) + 0.241, Math.floor(WallClip.mc.field_1724.method_23317()) + 0.759) - WallClip.mc.field_1724.method_23317()), (double)-0.03, (double)0.03), WallClip.mc.field_1724.method_23318(), WallClip.mc.field_1724.method_23321() + class_3532.method_15350((double)(a.roundToClosest(WallClip.mc.field_1724.method_23321(), Math.floor(WallClip.mc.field_1724.method_23321()) + 0.241, Math.floor(WallClip.mc.field_1724.method_23321()) + 0.759) - WallClip.mc.field_1724.method_23321()), (double)-0.03, (double)0.03));
                mc.method_1562().method_52787((class_2596)new class_2828.class_2829(WallClip.mc.field_1724.method_23317(), WallClip.mc.field_1724.method_23318(), WallClip.mc.field_1724.method_23321(), true));
                mc.method_1562().method_52787((class_2596)new class_2828.class_2829(a.roundToClosest(WallClip.mc.field_1724.method_23317(), Math.floor(WallClip.mc.field_1724.method_23317()) + 0.23, Math.floor(WallClip.mc.field_1724.method_23317()) + 0.77), WallClip.mc.field_1724.method_23318(), a.roundToClosest(WallClip.mc.field_1724.method_23321(), Math.floor(WallClip.mc.field_1724.method_23321()) + 0.23, Math.floor(WallClip.mc.field_1724.method_23321()) + 0.77), true));
                ++a.packets;
            }
        }
    }

    @EventHandler
    public void onPacket(PacketEvent.Send a) {
        Object t;
        WallClip a22;
        WallClip wallClip = a22;
        if (WallClip.nullCheck() || !wallClip.bypass.getValue()) {
            return;
        }
        if (wallClip.cancel && (t = a.getPacket()) instanceof class_2828) {
            a22 = (class_2828)t;
            if (!wallClip.insideBlock()) {
                if (wallClip.clipMode.getValue()) {
                    wallClip.disable();
                }
                return;
            }
            if (a22.method_36172()) {
                WallClip wallClip2 = wallClip;
                if (wallClip2.timer.passedMs(wallClip2.rotationDelay.getValue())) {
                    WallClip wallClip3;
                    WallClip wallClip4 = a22;
                    float f = wallClip4.method_12271(0.0f);
                    float a22 = wallClip4.method_12270(0.0f);
                    wallClip.cancel = false;
                    if (wallClip.invalid.getValue()) {
                        mc.method_1562().method_52787((class_2596)new class_2828.class_2830(WallClip.mc.field_1724.method_23317(), WallClip.mc.field_1724.method_23318() + 1337.0, WallClip.mc.field_1724.method_23321(), f, a22, false));
                        mc.method_1562().method_52787((class_2596)new class_2828.class_2830(WallClip.mc.field_1724.method_23317(), WallClip.mc.field_1724.method_23318() - 1337.0, WallClip.mc.field_1724.method_23321(), f, a22, false));
                        wallClip3 = wallClip;
                    } else {
                        mc.method_1562().method_52787((class_2596)new class_2828.class_2830(WallClip.mc.field_1724.method_23317(), WallClip.mc.field_1724.method_23318() + 2.0, WallClip.mc.field_1724.method_23321(), f, a22, false));
                        mc.method_1562().method_52787((class_2596)new class_2828.class_2830(WallClip.mc.field_1724.method_23317(), WallClip.mc.field_1724.method_23318() - 2.0, WallClip.mc.field_1724.method_23321(), f, a22, false));
                        wallClip3 = wallClip;
                    }
                    wallClip3.cancel = true;
                    wallClip.timer.reset();
                }
            }
            a.cancel();
        }
    }

    @Override
    public void onEnable() {
        WallClip a;
        WallClip wallClip = a;
        if (WallClip.nullCheck()) {
            return;
        }
        if (wallClip.bypass.getValue() && wallClip.clipMode.getValue()) {
            WallClip wallClip2;
            wallClip.cancel = false;
            if (wallClip.clipIn.getValue()) {
                a = WallClip.mc.field_1724.method_5735();
                WallClip.mc.field_1724.method_5814(WallClip.mc.field_1724.method_23317() + (double)a.method_10148() * 0.5, WallClip.mc.field_1724.method_23318(), WallClip.mc.field_1724.method_23321() + (double)a.method_10165() * 0.5);
                mc.method_1562().method_52787((class_2596)new class_2828.class_2829(WallClip.mc.field_1724.method_23317(), WallClip.mc.field_1724.method_23318(), WallClip.mc.field_1724.method_23321(), true));
                wallClip2 = wallClip;
            } else {
                mc.method_1562().method_52787((class_2596)new class_2828.class_2829(WallClip.mc.field_1724.method_23317(), WallClip.mc.field_1724.method_23318(), WallClip.mc.field_1724.method_23321(), true));
                WallClip.mc.field_1724.method_5814(wallClip.roundToClosest(WallClip.mc.field_1724.method_23317(), Math.floor(WallClip.mc.field_1724.method_23317()) + 0.23, Math.floor(WallClip.mc.field_1724.method_23317()) + 0.77), WallClip.mc.field_1724.method_23318(), wallClip.roundToClosest(WallClip.mc.field_1724.method_23321(), Math.floor(WallClip.mc.field_1724.method_23321()) + 0.23, Math.floor(WallClip.mc.field_1724.method_23321()) + 0.77));
                mc.method_1562().method_52787((class_2596)new class_2828.class_2829(wallClip.roundToClosest(WallClip.mc.field_1724.method_23317(), Math.floor(WallClip.mc.field_1724.method_23317()) + 0.23, Math.floor(WallClip.mc.field_1724.method_23317()) + 0.77), WallClip.mc.field_1724.method_23318(), wallClip.roundToClosest(WallClip.mc.field_1724.method_23321(), Math.floor(WallClip.mc.field_1724.method_23321()) + 0.23, Math.floor(WallClip.mc.field_1724.method_23321()) + 0.77), true));
                wallClip2 = wallClip;
            }
            wallClip2.cancel = true;
        }
    }

    @Override
    public void onDisable() {
        a.packets = 0;
    }

    public WallClip() {
        WallClip a;
        WallClip wallClip = a;
        super(FrameFilter.ALLATORIxDEMO("6Q\"s\bv;s"), Module.Category.Exploit);
        WallClip wallClip2 = a;
        wallClip2.bypass = wallClip.add(new BooleanSetting(BlockUpUtil.ALLATORIxDEMO("gcHf\u0001>"), false));
        wallClip.delay = wallClip.add(new SliderSetting(FrameFilter.ALLATORIxDEMO("{.v3z"), 5, 1, 10, object -> {
            Object a = object;
            WallClip a2 = this;
            return !a2.bypass.getValue();
        }));
        a.rotationDelay = a.add(new SliderSetting(BlockUpUtil.ALLATORIxDEMO("Q\u001f;DnKrK^]k\u00134"), 100, 0, 500, a.bypass::getValue));
        a.obsidian = a.add(new BooleanSetting(FrameFilter.ALLATORIxDEMO(".R=v/s3m"), false, a.bypass::getValue));
        a.clipMode = a.add(new BooleanSetting(BlockUpUtil.ALLATORIxDEMO("uh\u0004("), true, a.bypass::getValue).setParent());
        a.clipIn = a.add(new BooleanSetting(FrameFilter.ALLATORIxDEMO("\u0003p=\u001bm"), true, object -> {
            Object a = object;
            WallClip a2 = this;
            return a2.bypass.getValue() && a2.clipMode.isOpen();
        }));
        a.invalid = a.add(new BooleanSetting(BlockUpUtil.ALLATORIxDEMO("J\u001e9DvKyu{[l\u00179"), true, a.bypass::getValue));
        WallClip wallClip3 = a;
        a.cancel = true;
        wallClip3.timer = new Timer();
        wallClip3.setChinese(FrameFilter.ALLATORIxDEMO("\u5333\u589a"));
        INSTANCE = wallClip3;
    }

    @Override
    public String getInfo() {
        WallClip a;
        if (a.bypass.getValue()) {
            return String.valueOf(a.timer.getPassedTimeMs());
        }
        return String.valueOf(a.packets);
    }

    private /* synthetic */ double roundToClosest(double a, double a2, double a3) {
        double d = a - a2;
        if (a3 - a > d) {
            return a2;
        }
        return a3;
    }
}
